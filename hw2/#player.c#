#define _POSIX_SOURCE
#include <signal.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int numHandles = 0;

void my_handler(int);
static void fault_handler(int signum){
  
  printf("Caught signal number %d\n", signum);
  
}
int main(int argc, char *argv[]){
    
  char * name = argv[1];
  char * position = argv[2];

  sigset_t mask;
  sigemptyset(&mask);
  struct sigaction sa = {
    .sa_handler = fault_handler,
    .sa_mask = mask,
    .sa_flags = 0
  };
  sigaction(SIGUSR1, &sa, );
 
  printf("#%ld:%s (%s)\n",getpid(), name, position);
  signal(SIGUSR1, fault_handler);
  for(;;);
  return 0;
}

void my_handler(int sig){
  if(sig == SIGUSR1){   
    numHandles++;
    printf("%d - Caught signal SIGUSR1 times.\n", getpid());
  }
}
